{{- range $route := .Values.routes }}
apiVersion: 'gateway.networking.k8s.io/v1'
kind: 'HTTPRoute'
metadata:
  name: {{ $route.name}}-proxy-route
spec:
  parentRefs:
  {{- if $route.private }}
  - name: private
    namespace: envoy-gateway
    sectionName: web-https
  {{- end }}
  {{- if $route.public }}
  - name: public
    namespace: envoy-gateway
    sectionName: web-https
  {{- end }}
  hostnames:
   - {{ $route.name}}.mobrockers.com
  rules:
  - backendRefs:
    - name: proxy-{{ $route.name }}
      port: {{ $route.port }}
---
{{- end }}
