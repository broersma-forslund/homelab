home-assistant:

  podSecurityContext:
    fsGroup: 5000

  securityContext:
    runAsGroup: 5000
    capabilities: {}

  persistence:
    size: 10Gi

  route:
    enabled: true
    hostnames:
      - home.mobrockers.com
    parentRefs:
      - name: private
        namespace: envoy-gateway
        sectionName: web-https
      - name: public
        namespace: envoy-gateway
        sectionName: web-https
  ingress:
    enabled: true
    class: nginx
    domain: home.mobrockers.com
    tls:
      enabled: true

  config:
    securityContext:
      runAsGroup: 5000

  additionalVolumes:
  - name: mqtts-proxy-config
    configMap:
      name: mqtts-proxy-config
  - name: svc-cluster-local-bundle
    configMap:
      name: svc-cluster-local-bundle
  additionalInitContainers:
  - name: mqtts-proxy
    image: cgr.dev/chainguard/stunnel:latest@sha256:400e33fb5a4d1c3a590968844aa748d851ed7c5fc203343ae5ec472a5972ee81
    restartPolicy: Always
    command: ["stunnel", "/etc/conf/stunnel.conf"]
    volumeMounts:
    - name: mqtts-proxy-config
      mountPath: /etc/conf/
    - name: svc-cluster-local-bundle
      mountPath: /ca
      readOnly: true
    # resources:
    #   requests:
    #     cpu: 10m
    #     memory: 16Mi
    #   limits:
    #     memory: 64Mi

matterHub:
  image:
    repository: ghcr.io/t0bst4r/home-assistant-matter-hub
    tag: 3.0.0-alpha.87

  route:
    enabled: true
    hostnames:
    - matter-hub.mobrockers.com
    parentRefs:
    - name: private
      namespace: envoy-gateway
      sectionName: web-https
